<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Treino em Casa</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      text-align: center;
    }
    #exercise-name {
      font-size: 2em;
      margin-bottom: 1rem;
    }
    #counter {
      font-size: 4em;
      margin: 1rem 0;
    }
    #status {
      font-size: 1.2em;
      color: #0f0;
    }
    #start-button, #restart-button {
      margin-top: 2rem;
      padding: 1rem 2rem;
      font-size: 1rem;
      cursor: pointer;
    }
    #restart-button {
      display: none;
    }
    #repetition-container, #mute-container {
      margin-top: 1rem;
      color: #fff;
    }
    #repetitions {
      font-size: 1rem;
      padding: 0.5rem;
    }
    #spotify-button {
  display: inline-block;
  margin-top: 1rem;
  background-color: #1DB954;
  color: white;
  padding: 0.8rem 2rem;
  font-size: 1rem;
  font-weight: bold;
  border: none;
  border-radius: 25px;
  text-decoration: none;
  transition: background-color 0.3s;
}
#spotify-button:hover {
  background-color: #1ed760;
}

  </style>
</head>
<body>
  <div class="container">
    <h1>Treino em Casa</h1>
    <div id="exercise-name">Prepare-se...</div>
    <div id="counter">--</div>
    <div id="status"></div>

    <div id="repetition-container">
      <label for="repetitions">Repetições do treino:</label>
      <select id="repetitions">
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
      </select>
    </div>

    <div id="mute-container">
      <label><input type="checkbox" id="mute-sounds" /> Silenciar sons</label>
    </div>

    <button id="start-button">Iniciar Treino</button>
    <button id="restart-button">Recomeçar<br><br></button><br><br>
<iframe data-testid="embed-iframe" style="border-radius:12px" src="https://open.spotify.com/embed/playlist/3Z7fIVX3AWyZTrVOXZrPBQ?utm_source=generator" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe><br>(Nescessário fazer login)

  </div>

  <!-- Sons locais -->
  <audio id="beep" src="beep.mp3" preload="auto"></audio>
  <audio id="tick" src="tick.mp3" preload="auto"></audio>
  <audio id="rep" src="rep.mp3" preload="auto"></audio>
  <audio id="end" src="end.mp3" preload="auto"></audio>






  <script>
    const exercises = [
      { name: "Agachamento", reps: 20 },
      { name: "Apoio", reps: 15 },
      { name: "Afundo", reps: 12 },
      { name: "Prancha", time: 30 },
      { name: "Abdominal Bicicleta - Esquerda", reps: 20 },
      { name: "Abdominal Bicicleta - Direita", reps: 20 },
      { name: "Burpee", reps: 10 },
      { name: "Escalador", time: 30 },
    ];

    const exerciseName = document.getElementById("exercise-name");
    const counter = document.getElementById("counter");
    const status = document.getElementById("status");
    const startButton = document.getElementById("start-button");
    const restartButton = document.getElementById("restart-button");
    const repetitionsSelect = document.getElementById("repetitions");
    const muteCheckbox = document.getElementById("mute-sounds");

    const beep = document.getElementById("beep");
    const tick = document.getElementById("tick");
    const repSound = document.getElementById("rep");
    const endSound = document.getElementById("end");

    function playBeep() {
      if (!muteCheckbox.checked) beep.cloneNode(true).play();
    }

    function playRepSound() {
      if (!muteCheckbox.checked) repSound.cloneNode(true).play();
    }

    function playTick() {
      if (!muteCheckbox.checked) tick.cloneNode(true).play();
    }

    function playEndSound() {
      if (!muteCheckbox.checked) endSound.cloneNode(true).play();
    }

    function speakNumber(n) {
      if (muteCheckbox.checked) return;
      const msg = new SpeechSynthesisUtterance(n.toString());
      msg.lang = 'pt-BR';
      msg.pitch = 0.8;
      msg.rate = 1.3;
      msg.volume = 10;

      const voices = speechSynthesis.getVoices();
      const voice = voices.find(v => v.name === 'Google português do Brasil');
      if (voice) msg.voice = voice;

      speechSynthesis.speak(msg);
    }

    function delay(ms) {
      return new Promise(res => setTimeout(res, ms));
    }

    async function countdown(seconds) {
      status.textContent = "Preparar...";
      for (let i = seconds; i > 0; i--) {
        counter.textContent = i;
        playBeep();
        await delay(1000);
      }
    }

    async function pause(seconds) {
      status.textContent = "Pausa...";
      exerciseName.textContent = "Respire";
      for (let i = seconds; i > 0; i--) {
        counter.textContent = i;
        playBeep();
        playTick();
        await delay(1000);
      }
    }

    async function startExercise(ex) {
      exerciseName.textContent = ex.name;
      status.textContent = "Executando...";

      if (ex.reps) {
        for (let i = 1; i <= ex.reps; i++) {
          counter.textContent = i;
          playRepSound();
          speakNumber(i);
          await delay(2000);
        }
      } else if (ex.time) {
        for (let i = ex.time; i > 0; i--) {
          counter.textContent = i;
          playTick();
          await delay(1000);
        }
      }

      playEndSound();
    }

    async function startRoutine() {
      startButton.style.display = "none";
      restartButton.style.display = "none";
      const repetitions = parseInt(repetitionsSelect.value);

      for (let round = 1; round <= repetitions; round++) {
        await countdown(3);

        for (let i = 0; i < exercises.length; i++) {
          await startExercise(exercises[i]);
          if (i < exercises.length - 1) {
            exerciseName.textContent = `Próximo: ${exercises[i + 1].name}`;
            await pause(10);
          }
        }

        if (round < repetitions) {
          exerciseName.textContent = `Próxima rodada: ${round + 1}`;
          status.textContent = "Prepare-se para repetir o treino...";
          await pause(15);
        }
      }

      exerciseName.textContent = "Fim do treino!";
      counter.textContent = "✔";
      status.textContent = "Parabéns!";
      playEndSound();
      restartButton.style.display = "inline-block";
    }

    startButton.addEventListener("click", startRoutine);
    restartButton.addEventListener("click", startRoutine);
  </script>
</body>
</html>
